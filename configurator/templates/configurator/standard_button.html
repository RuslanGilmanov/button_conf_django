{% extends 'configurator/base.html' %}
{% load static %}

{% block title %}
  {{ 'Standard button' }}
{% endblock %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <header>
    <h1>Standard button</h1>
  </header><br>

<div class="background-container">
  <form method="POST">
    {% csrf_token %}
    <div class="form-group">
      <label for="button_body">{{ form.button_body.label_tag }}</label>
      <div id="button_body">{{ form.button_body }}</div>
    </div>
    <div class="form-group">
      <label for="contact_arr">{{ form.contact_arr.label_tag }}</label>
      <div id="contact_type">{{ form.contact_arr }}</div>
    </div>
    <div class="form-group">
      <label for="led_voltage">{{ form.led_voltage.label_tag }}</label>
      {{ form.led_voltage }}
    </div>
    <div class="form-group">
      <label for="led_color">{{ form.led_color.label_tag }}</label>
      {{ form.led_color }}
    </div>
    <div class="form-group">
      <label for="surround_type">{{ form.surround_type.label_tag }}</label>
      {{ form.surround_type }}
    </div>
    <div class="form-group">
      <label for="surround_color">{{ form.surround_color.label_tag }}</label>
      {{ form.surround_color }}
    </div>
    <div class="form-group">
      <label for="pressel_type">{{ form.pressel_type.label_tag }}</label>
      {{ form.pressel_type }}
    </div>
    <div class="form-group">
      <label for="pressel_finish">{{ form.pressel_finish.label_tag }}</label>
      {{ form.pressel_finish }}
    </div>
    <div class="form-group">
      <label for="mould_color">{{ form.mould_color.label_tag }}</label>
      {{ form.mould_color }}
    </div>
    <button type="submit">Generate code</button>
  </form><br>

  {% if button_code %}
    <div>{{ button_code }}</div>
  {% endif %}
</div>

<style>
    .background-container {
      background-position: center;
      background-attachment: scroll;
      background-repeat: no-repeat;
      background-size: 40%;
      background-image: url({% static 'images/Selection.jpg' %});
      margin-left: 30px; /* Adjust the margin as needed */
    }
    
    .form-group {
      display: block;
      margin-bottom: 10px;
    }
    
    .form-group label {
      display: block;
    }
</style>

<script>
$(document).ready(function () {
    $("#button_body").change(function () {
        var buttonBody = $(this).val();
        $.ajax({
            url: "{% url 'contact-type' %}",
            data: {'button_body': buttonBody},
            dataType: 'json',
            success: function (data) {
                var contactTypeDropdown = $("#contact_type");
                contactTypeDropdown.empty();
                $.each(data, function (key, value) {
                    contactTypeDropdown.append($('<option></option>').attr('value', key).text(value));
                });
            }
        });
    });
});
</script>

{% endblock %}
